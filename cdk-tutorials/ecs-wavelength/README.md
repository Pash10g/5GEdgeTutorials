# ECS Wavelength Demo using the AWS CDK
Generate an ECS Cluster with a task scheduled to an AWS Wavelength Zone, powered by Verizon 5G Edge.

This template schedules a task to an ECS cluster instance in a Wavelength Zone.
**WARNING** This project creates an Amazon EC2 instance. You will be billed for the AWS
resources used if you create a stack from this template.'

This demo is based on sample code from AWS CDK Developer Guide, Copyright 2018 Amazon.com, Inc. or its affiliates. Sample code licensed under the MIT License available here: https://github.com/awsdocs/aws-cdk-guide/blob/main/LICENSE-SAMPLECODE

For more info on AWS Wavelength services check out the guide [here](https://aws.amazon.com/wavelength/).

## Build
Before building this app, you must first create a .env file in the root directory to keep your AWS Account Number and default region. Replace `<your_account_id>` with your AWS account number and use the region you want.

```bash
AWS_ACCOUNT_NUMBER=<your_account_id>
AWS_ACCOUNT_REGION=us-west-2
```

You should then specify the Wavelength Zone location you want to use by updating the `wavelengthAZ` string const on line 18 in `index.ts`.  A list of Wavelength zone locations can be found [here](https://aws.amazon.com/wavelength/locations/).

```typescript
// Wavelength zones based on region availability
const wavelengthAZ: string = 'us-west-2-wl1-sfo-wlz-1';
```

Lastly, create a new key pair using the AWS console and update line 124 in the `index.ts` file with your key pair name.

```typescript
keyName: 'wl-cdk-demo'
```

To build this app, you need to be in this example's root folder. Then run the following:

```bash
npm install -g aws-cdk
npm install
npm run build
```

This will install the necessary CDK, then this example's dependencies, and then build your TypeScript files and your CloudFormation template.

## Deploy
Run `cdk deploy`. This will deploy / redeploy your Stack to your AWS Account.

## Synthesize CloudFormation Template
To see the CloudFormation template generated by the CDK, run `cdk synth`, then check the output file in the "cdk.out" directory.

## Destroy
To destroy all AWS services generated by the CDK, run `cdk destroy`.
